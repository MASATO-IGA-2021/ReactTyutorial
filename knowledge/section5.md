# 基本編

## 5.コンポーネント開発(応用)

### 5-1.組み込みコンポーネント

#### 5-1-1 コンポーネントの描画町を検知する -Suspense コンポーネント(1)

- Suspense コンポーネント：待ちを検知して一時的にフォールバック(代替コンテンツ)を表示

  - コンポーネントを遅延ロードする
  - ネットワーク経由でデータを取得する

- コンポーネントを遅延ロードする
  - 動的インポートしたコンポーネント
  ```
  lazy(() => statements)
  statements: コンポーネント読み込みコード
  ```
  - <Suspense>要素が複数の遅延コンポーネントをラップしている場合、全てのコンポーネントがロードされたところで配下の内容を表示する。

#### 5-1-2 非同期処理の終了を待ち受ける -Suspense コンポーネント(2)

- コンポーネント以外のリソース取得(=Promise による非同期処理)を<Suspense>要素で待ち受けることが可能になっている。
- Promise による非同期処理を受け取る
  ```throw new Promise((resolve, reject) => { })```
  - **<Suspense>要素**：子要素から投げられたPromiseを補足すると、フォールバック(代替コンテンツ)を表示するコンポーネント
  - Promiseと状態管理
    - Promiseは非同期処理の状態を管理するためのオブジェクト
       - Promiseオブジェクトは生成直後Pending(保留中)状態であり、非同期処理を終了することでFulfilled(成功)/Rejected(失敗)の状態になる。
       - Promiseオブジェクトは必ず一方向性であるため、Fulfilled(成功)/Rejected(失敗)からPendingに戻ることはない。
- Promiseの状態の変化を検知する
- Promiseの結果を表示する
  - <Suspense>要素はPromiseの変化に応じて描画を再試行するだけで、非同期処理の中身を見ているわけではない。
#### 5-1-3 コンポーネントの描画時間を計測する - Profilerコンポーネント
```
<Profiler id='id' onRender={handleRender}>
  contents
</Profiler>

id: Profilerを識別するid値
handleRender: 配下のコンポーネントが描画される際に実行するコールバック関数
contents: パフォーマンスを計測する対象
```

### 5-2.コンポーネント開発でのスタイル定義
#### 5-2-1 JSX式にスタイルシートを埋め込む -Styled JSX
- **Styled JSX(CSS-in-JS)**:JSX式にスタイル定義を埋め込む形式のライブラリ
  - コンポーネントファイルでロジック/スタイルをまとめて管理できる
  - .vueファイルともよく似た仕組み

### 5-3.コンポーネントのその他の話題
